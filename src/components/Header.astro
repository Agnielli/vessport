---
// Header component with navigation and cart counter
---

<header class="sticky top-0 z-50 bg-white shadow-md">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <img
        src="/images/horizontal.png"
        alt="Ves Sport Logo"
        class="h-14 w-auto"
      />

      <!-- Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        <a
          href="#inicio"
          class="text-gray-700 hover:text-primary transition-colors">Inicio</a
        >
        <a
          href="#historia"
          class="text-gray-700 hover:text-primary transition-colors">Historia</a
        >
        <a
          href="#servicios"
          class="text-gray-700 hover:text-primary transition-colors"
          >Servicios</a
        >
        <a
          href="#productos"
          class="text-gray-700 hover:text-primary transition-colors"
          >Productos</a
        >
        <a
          href="#contacto"
          class="text-gray-700 hover:text-primary transition-colors">Contacto</a
        >
      </nav>

      <!-- Cart Button -->
      <div class="flex items-center">
        <a
          href="/carrito"
          class="relative p-2 text-gray-700 hover:text-primary transition-colors"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0V19a2 2 0 002 2h7a2 2 0 002-2v-4.5M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"
            ></path>
          </svg>
          <span
            id="cart-count"
            class="absolute -top-1 -right-1 bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden"
            >0</span
          >
        </a>

        <!-- Mobile menu button -->
        <button id="mobile-menu-toggle" class="md:hidden ml-4 p-2">
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="md:hidden hidden border-t border-gray-200">
      <div class="py-4 space-y-2">
        <a
          href="#inicio"
          class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Inicio</a
        >
        <a
          href="#historia"
          class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Historia</a
        >
        <a
          href="#servicios"
          class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Servicios</a
        >
        <a
          href="#productos"
          class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Productos</a
        >
        <a
          href="#contacto"
          class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Contacto</a
        >
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuToggle?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Update cart counter on page load
  document.addEventListener('DOMContentLoaded', () => {
    updateCartCounter();
  });

  function updateCartCounter() {
    const cartCount = document.getElementById('cart-count');
    const saved = localStorage.getItem('ves-sport-cart');

    if (saved) {
      const items = JSON.parse(saved);
      const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);

      if (totalItems > 0) {
        cartCount.textContent = totalItems.toString();
        cartCount.classList.remove('hidden');
      } else {
        cartCount.classList.add('hidden');
      }
    } else {
      cartCount.classList.add('hidden');
    }
  }

  // Listen for cart updates
  window.addEventListener('addToCart', () => {
    setTimeout(updateCartCounter, 100);
  });
</script>
